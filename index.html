<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartStock</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="assets/S..png" type="image/x-icon">
</head>

<body>
    <aside class="sidebar">
        <header class="sidebar-header">
            <img class="logo-img" src="assets/S..png" alt="logo">
        </header>
        <nav>
            <a href="index.html">
                <button>
                    <span>
                        <i class="menu-icon">
                            <img src="assets/menu/home-alt-svgrepo-com (1) 1.png" alt="Início">
                        </i>
                        <span>INÍCIO</span>
                    </span>
                </button>
            </a>
            <a href="pages/produto/produto.html">
                <button>
                    <span>
                        <i class="menu-icon">
                            <img src="assets/menu/caixa-aberta (4) 1.png" alt="Produtos">
                        </i>
                        <span>PRODUTOS</span>
                    </span>
                </button>
            </a>
            <a href="pages/pedido/pedido.html">
                <button>
                    <span>
                        <i class="menu-icon">
                            <img src="assets/menu/dinheiro-cheque-editar (1) 1.png" alt="Pedido">
                        </i>
                        <span>PEDIDO</span>
                    </span>
                </button>
            </a>
            <a href="pages/cliente/cliente.html">
                <button>
                    <span>
                        <i class="menu-icon">
                            <img src="assets/menu/Cliente.png" alt="Cliente">
                        </i>
                        <span>CLIENTE</span>
                    </span>
                </button>
            </a>
            <a href="pages/suporte/suporte.html">
                <button>
                    <span>
                        <i class="menu-icon">
                            <img src="assets/menu/codigo-do-laptop 1.png" alt="Suporte">
                        </i>
                        <span>SUPORTE</span>
                    </span>
                </button>
            </a>
        </nav>
    </aside>

    <main class="main">
        <div class="main-content">
            <div class="container">
                <div class="dashboard">
                    <h3>DASHBOARD</h3>
                    <div class="cards">
                        <div class="card">
                            <h3>PRODUTOS NO ESTOQUE</h3>
                            <p id="produtos-count"></p>
                        </div>
                        <div class="card">
                            <h3>CLIENTES</h3>
                            <p id="clientes-count"></p>
                        </div>
                        <div class="card">
                            <h3>PEDIDOS TOTAIS</h3>
                            <p id="pedidos-count"></p>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <div class="action-card">
                        <img src="assets/cad-produto.png" alt="Produtos"><br>
                        <a href="pages/produto/produto.html">
                            <button>Produtos</button>
                        </a>
                        <p>CADASTRAR PRODUTOS</p>
                    </div>
                    <div class="action-card">
                        <img src="assets/cad-cliente.png" alt="Clientes"><br>
                        <a href="pages/cliente/cliente.html">
                            <button>Clientes</button>
                        </a>
                        <p>CADASTRAR CLIENTES</p>
                    </div>
                    <div class="action-card">
                        <img src="assets/cad-pedido.png" alt="Pedidos"><br>
                        <a href="pages/pedido/pedido.html">
                            <button>Pedidos</button>
                        </a>
                        <p>CADASTRAR PEDIDOS</p>
                    </div>
                    
                </div>
            </div>
        </div>
    </main>
    <script>
        // Função para atualizar a contagem de produtos
        function updateDashboard() {
            fetch('/total/produtos')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('produtos-count').textContent = data;
                })
                .catch(error => console.error('Erro ao carregar produtos:', error));

            fetch('/total/clientes')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('clientes-count').textContent = data;
                })
                .catch(error => console.error('Erro ao carregar clientes:', error));

            fetch('/total/pedidos')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('pedidos-count').textContent = data;
                })
                .catch(error => console.error('Erro ao carregar pedidos:', error));
        }

        // Atualiza o dashboard quando a página carrega
        document.addEventListener('DOMContentLoaded', updateDashboard);
    </script>
</body>

</html>